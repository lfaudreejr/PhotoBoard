webpackJsonp([1],{"4+hh":function(t,e){},"54YU":function(t,e){},IQeL:function(t,e){},J9ox:function(t,e){},LjJd:function(t,e){},MXkr:function(t,e){},NCSd:function(t,e){},NHnr:function(t,e,n){"use strict";function o(t){return h("/api/boards",t)}function a(){return _("/api/user/profile")}function i(t,e){return h("/api/pins/add",{pin:t,board:e})}function r(t){return C("/api/pins/"+t)}function c(t){return _("/api/pins/"+t+"/comments")}function d(t){var e=k()(1e3*t.expiresIn+(new Date).getTime());return localStorage.setItem("access_token",t.accessToken),localStorage.setItem("id_token",t.idToken),localStorage.setItem("expires_at",e),ut.emit("authChange",{authenticated:!0})}function s(t){st().client.userInfo(t.accessToken,function(t,e){return t&&console.log(t),localStorage.setItem("id",k()(e.sub)),localStorage.setItem("profile",k()(e)),ut.emit("profileChange",{currentUser:p()}),setTimeout(function(){h("/api/user/profile",{_id:p()})},1e3)})}Object.defineProperty(e,"__esModule",{value:!0});var l=n("7+uW"),u=n("mtWM"),m=n.n(u),f=function(){return localStorage.getItem("access_token")},v=function(){var t=JSON.parse(localStorage.getItem("profile"));return t?t.name:null},p=function(){return JSON.parse(localStorage.getItem("id"))},h=function(t,e){return m.a.post(t,e,{headers:{Authorization:"Bearer "+f(),Profile:p()}})},_=function(t){return m.a.get(t,{headers:{Authorization:"Bearer "+f(),Profile:p()}})},g=function(t,e){return m.a.put(t,e,{headers:{Authorization:"Bearer "+f(),Profile:p()}})},C=function(t){return m.a.delete(t,{headers:{Authorization:"Bearer "+f(),Profile:p()}})},b=n("Xxa5"),P=n.n(b),D=n("exGp"),w=n.n(D),B=n("mvHQ"),k=n.n(B),y=n("2fyi"),x=n.n(y),A=n("BzvE"),T=n.n(A),M={DOMAIN:"lfaudreejr.auth0.com",CLIENT_ID:"exgiRaE0pykjn3P70dPvVJW58DLJq7Ny",REDIRECT_URI:window.location.origin+"/callback"},E=n("/ocq"),S=n("//Fk"),N=n.n(S),I=new T.a,$=function(){return p()},U=function(){return v()},R=function(){var t=w()(P.a.mark(function t(e){var n;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_("/api/boards/"+e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=w()(P.a.mark(function t(){var e,n,o;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a();case 2:return e=t.sent,n=[],e.data.forEach(function(t){n.push(R(t.title))}),t.next=7,N.a.all(n);case 7:return o=t.sent,t.abrupt("return",o.map(function(t){return t}));case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),F={name:"main",props:["authenticated","currentUser"],data:function(){return{loading:!1,menuVisible:!1,savePinDialogControl:!1,createABoardToAddPinControl:!1,clickedPin:!1,pins:{},currentBoards:null,createBoardTitle:null}},methods:{loadPins:function(){return _("/api/pins/all")},updateClickedPin:function(t){this.clickedPin=t},getCurrentClickedPin:function(){return this.clickedPin},showSavePinDialog:function(t){this.savePinDialogControl=t},savePinToBoard:function(t){var e=this,n=this.getCurrentClickedPin();i({url:n.url,description:n.description,uploaded_by:n.uploaded_by,saved_by:$()},{_id:t}).then(function(t){e.$router.replace("/"+U()+"/dashboard/"+t.data.value.title)}).catch(function(t){return console.error(t)})},toggleCreateABoardDialog:function(t){this.createABoardToAddPinControl=t},createABoardToAddPin:function(t){var e=this;this.loading=!0,o({title:t,owner:$()}).then(function(t){e.loading=!1,e.savePinToBoard(t.data._id)})},gotoPin:function(t){this.$router.replace("/pins/"+t._id)},fetchData:function(){var t=this;this.loading=!0,this.loadPins().then(function(e){t.pins=e.data,setTimeout(function(){$()&&a().then(function(e){t.currentBoards=e.data}).catch(function(t){return console.error(t)})},2e3),t.loading=!1}).catch(function(t){return console.error(t)})}},created:function(){this.fetchData()},updated:function(){this.$redrawVueMasonry()},watch:{$route:"fetchData"}},V={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.loading?n("div",[n("md-progress-bar",{staticClass:"md-accent",attrs:{"md-mode":"query"}})],1):t._e(),t._v(" "),t.pins?n("div",{directives:[{name:"masonry",rawName:"v-masonry"}],attrs:{"transition-duration":"0.3s","item-selector":".home-tile"}},t._l(t.pins,function(e){return n("div",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],key:e._id,staticClass:"home-tile"},[n("md-card",[n("md-card-media",[n("img",{attrs:{src:e.url,alt:e.description}})]),t._v(" "),n("md-card-area",[n("md-card-actions",[t.authenticated&&t.currentUser!==e.saved_by?n("md-button",{staticClass:"md-icon-button",on:{click:function(n){t.updateClickedPin(e),t.showSavePinDialog(!0)}}},[n("md-icon",[t._v("bookmark")])],1):t._e(),t._v(" "),n("md-button",{staticClass:"md-icon-button",nativeOn:{click:function(n){t.gotoPin(e)}}},[n("md-icon",[t._v("pageview")])],1)],1)],1)],1)],1)})):t._e(),t._v(" "),n("md-dialog",{staticClass:"dialog",attrs:{"md-active":t.savePinDialogControl},on:{"update:mdActive":function(e){t.savePinDialogControl=e}}},[n("md-dialog-title",[t._v("Select a board to save pin to.")]),t._v(" "),n("md-dialog-content",[n("div",[n("md-button",{on:{click:function(e){t.toggleCreateABoardDialog(!0)}}},[t._v("Create     Board")])],1),t._v(" "),t._l(t.currentBoards,function(e){return t.currentBoards?n("div",{key:e._id},[n("md-button",{on:{click:function(n){t.savePinToBoard(e._id)}}},[t._v(t._s(e.title)+"   ")])],1):t._e()})],2),t._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(e){t.showSavePinDialog(!1)}}},[t._v("Cancel")])],1)],1),t._v(" "),n("md-dialog",{attrs:{"md-active":t.createABoardToAddPinControl},on:{"update:mdActive":function(e){t.createABoardToAddPinControl=e}}},[n("md-dialog-title",[t._v("Create Board")]),t._v(" "),n("md-dialog-content",[n("md-field",{attrs:{"md-clearable":""}},[n("label",{attrs:{for:"board-name"}},[t._v("Board name")]),t._v(" "),n("md-input",{attrs:{name:"board-name"},model:{value:t.createBoardTitle,callback:function(e){t.createBoardTitle=e},expression:"createBoardTitle"}})],1),t._v(" "),n("md-dialog-actions",[n("md-button",{nativeOn:{click:function(e){t.toggleCreateABoardDialog(!1)}}},[t._v("Cancel")]),t._v(" "),n("md-button",{nativeOn:{click:function(e){t.createABoardToAddPin(t.createBoardTitle)}}},[t._v("Create")])],1)],1)],1)],1)},staticRenderFns:[]},J=n("VU/8")(F,V,!1,function(t){n("LjJd")},null,null).exports,z={name:"callback",data:function(){return lt(),{}}},L={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"spinner"},[e("md-progress-bar",{staticClass:"md-accent",attrs:{"md-mode":"indeterminate"}})],1)},staticRenderFns:[]},q=n("VU/8")(z,L,!1,null,null,null).exports,H={name:"profile",data:function(){return{loading:!1,showCreateBoardDialogProp:!1,showEditBoardDialogProp:!1,openDeleteDialogProp:!1,modal:{boardName:""},boards:null,newBoardTitle:null,editingBoard:null}},computed:{username:function(){return JSON.parse(localStorage.getItem("profile")).name},picture:function(){return JSON.parse(localStorage.getItem("profile")).picture},userBoards:function(){return this.boards}},methods:{showCreateBoardDialog:function(t){this.showCreateBoardDialogProp=t},openBoardEditModal:function(t){this.showEditBoardDialogProp=t},openDeleteConfirmModal:function(t){this.openDeleteDialogProp=t},setEditBoard:function(t){this.editingBoard=t},confirmDelete:function(t){var e=this;this.loading=!0,function(t){return C("/api/boards/"+t)}(t).then(function(t){e.getPins().then(function(t){e.loading=!1,e.boards=t,e.editingBoard=null}).catch(function(t){return console.error(t)}),e.openBoardEditModal(!1)}).catch(function(t){return console.error(t)})},createBoard:function(){var t=this;o({title:this.modal.boardName,owner:$()}).then(function(e){t.$router.push(t.modal.boardName)}).catch(function(t){console.error(t)})},submitBoardEdit:function(){var t=this;this.loading=!0,function(t,e){return g("/api/boards/"+t,e)}(this.editingBoard.title,{title:this.newBoardTitle}).then(function(e){t.getPins().then(function(e){t.loading=!1,t.boards=e}).catch(function(t){return console.error(t)}),t.openBoardEditModal(!1)}).catch(function(t){return console.error(t)}),this.newBoardTitle=null},gotoBoard:function(t){this.$router.push({name:"Board",params:{board:t}})},getBoards:function(){return a()},getPins:function(){return O()},fetchData:function(){var t=this;this.loading=!0,this.getPins().then(function(e){t.boards=e,t.loading=!1}).catch(function(t){return console.error(t)}),this.loading=!1}},created:function(){this.fetchData()},watch:{$route:"fetchData"}},j={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"profile"},[t.loading?n("div",[n("md-progress-bar",{staticClass:"md-accent",attrs:{"md-mode":"query"}})],1):t._e(),t._v(" "),n("div",{staticClass:"md-layout md-gutter md-alignment-top-center"},[n("div",{staticClass:"md-layout-item md-size-70"},[n("p",{staticClass:"md-display-1"},[t._v(t._s(t.username))])]),t._v(" "),n("div",{staticClass:"md-layout-item"},[n("img",{staticClass:"user-picture",attrs:{src:t.picture}})])]),t._v(" "),n("div",{directives:[{name:"masonry",rawName:"v-masonry"}],attrs:{"transition-duration":"0.3s","item-selector":".tile"}},[n("div",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],staticClass:"tile"},[n("md-card",{staticClass:"board-card",attrs:{"md-with-hover":""},nativeOn:{click:function(e){t.showCreateBoardDialog(!0)}}},[n("md-card-header",[n("span",{staticClass:"md-subhead"},[t._v("Add new board")])]),t._v(" "),n("md-ripple",[n("md-card-content",[n("md-button",{staticClass:"md-icon-button board-button"},[n("md-icon",[t._v("add")])],1)],1)],1)],1)],1),t._v(" "),t._l(t.userBoards,function(e){return t.userBoards?n("div",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],key:e.title,staticClass:"tile"},[n("md-card",{staticClass:"board",attrs:{"md-with-hover":""}},[n("md-ripple",{nativeOn:{click:function(n){t.gotoBoard(e.title)}}},[n("md-card-header",[n("span",{staticClass:"md-subhead"},[t._v(t._s(e.title))])]),t._v(" "),n("md-card-content",[n("div",{directives:[{name:"masonry",rawName:"v-masonry"}],attrs:{"item-selector":".inner-tile"}},t._l(e.pins,function(t){return n("div",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],key:t._id,staticClass:"inner-tile"},[n("img",{attrs:{src:t.url}})])}))])],1),t._v(" "),n("md-button",{on:{click:function(n){t.openBoardEditModal(!0),t.setEditBoard(e)}}},[t._v("edit")]),t._v(" "),n("md-button",{staticClass:"md-accent",on:{click:function(e){t.openDeleteConfirmModal(!0)}}},[t._v("Delete")])],1),t._v(" "),n("md-dialog-confirm",{attrs:{"md-active":t.openDeleteDialogProp,"md-title":"Are you sure?","md-content":"Deleting a board and it's pins is permanent.","md-confirm-text":"Delete","md-cancel-text":"Cancel"},on:{"update:mdActive":function(e){t.openDeleteDialogProp=e},"md-cancel":function(e){t.openDeleteConfirmModal(!1)},"md-confirm":function(n){t.confirmDelete(e._id)}}})],1):t._e()})],2),t._v(" "),n("md-dialog",{staticClass:"dialog",attrs:{"md-active":t.showCreateBoardDialogProp},on:{"update:mdActive":function(e){t.showCreateBoardDialogProp=e}}},[n("div",[n("md-dialog-title",[t._v("Create Board")]),t._v(" "),n("md-field",{attrs:{"md-clearable":""}},[n("label",{attrs:{for:"board-name"}},[t._v("Board name")]),t._v(" "),n("md-input",{attrs:{name:"board-name",id:"board-name"},model:{value:t.modal.boardName,callback:function(e){t.$set(t.modal,"boardName",e)},expression:"modal.boardName"}})],1),t._v(" "),n("md-divider"),t._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(e){t.showCreateBoardDialog(!1),t.modal.boardName=""}}},[t._v("Cancel")]),t._v(" "),n("md-button",{staticClass:"md-primary",on:{click:function(e){t.createBoard()}}},[t._v("Create")])],1)],1)]),t._v(" "),n("md-dialog",{staticClass:"dialog",attrs:{"md-active":t.showEditBoardDialogProp},on:{"update:mdActive":function(e){t.showEditBoardDialogProp=e}}},[n("md-dialog-title",[t._v("Edit board")]),t._v(" "),n("md-dialog-content",[n("md-field",{attrs:{"md-clearable":""}},[n("label",{attrs:{for:"new-title"}},[t._v("Title")]),t._v(" "),n("md-input",{attrs:{name:"new-title"},model:{value:t.newBoardTitle,callback:function(e){t.newBoardTitle=e},expression:"newBoardTitle"}})],1)],1),t._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(e){t.openBoardEditModal(!1)}}},[t._v("Cancel")]),t._v(" "),n("md-button",{staticClass:"md-primary",on:{click:function(e){t.submitBoardEdit()}}},[t._v("Save")])],1)],1)],1)},staticRenderFns:[]},Q=n("VU/8")(H,j,!1,function(t){n("NCSd")},"data-v-7aaafe02",null).exports,W={name:"board",data:function(){return{loading:!1,showDialogProp:!1,confirmDeletePinControl:!1,title:this.$route.params.board,board:{pins:null},modal:{url:null,description:null}}},computed:{boardPins:function(){return this.board.pins}},methods:{showDialog:function(t){this.showDialogProp=t},showConfirmDeletePinModal:function(t){this.confirmDeletePinControl=t},addPinToBoard:function(){var t=this;this.showDialog(!1),this.loading=!0;i({url:this.modal.url,description:this.modal.description,uploaded_by:$(),saved_by:$()},{_id:this.board._id}).then(function(e){t.modal.url=null,t.modal.description=null,t.getPins().then(function(e){t.loading=!1,t.board=e.data}).catch(function(t){return console.error(t)})}).catch(function(t){return console.error(t)})},gotoPin:function(t){this.$router.replace("/pins/"+t._id)},getPins:function(){return function(t){return _("/api/boards/"+t)}(this.$route.params.board)},deletePinFromBoard:function(t){var e=this;this.loading=!0,r(t).then(function(t){e.getPins().then(function(t){e.loading=!1,e.board=t.data}).catch(function(t){return console.error(t)})}).catch(function(t){return console.error(t)})},fetchData:function(){var t=this;this.loading=!0,this.getPins().then(function(e){t.board=e.data,t.loading=!1}).catch(function(t){return console.error(t)})}},created:function(){this.fetchData()},updated:function(){this.$redrawVueMasonry()},watch:{$route:"fetchData"}},X={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"profile"},[t.loading?n("div",[n("md-progress-bar",{staticClass:"md-accent",attrs:{"md-mode":"query"}})],1):t._e(),t._v(" "),n("div",{staticClass:"md-layout md-gutter md-alignment-top-center"},[n("div",{staticClass:"md-layout-item md-size-70"},[n("p",{staticClass:"md-display-1"},[t._v(t._s(t.title))])])]),t._v(" "),n("div",{directives:[{name:"masonry",rawName:"v-masonry"}],attrs:{"transition-duration":"0.3s","item-selector":".tile"}},[n("div",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],staticClass:"tile"},[n("md-card",{staticClass:"board-card",attrs:{"md-with-hover":""},nativeOn:{click:function(e){t.showDialog(!0)}}},[n("md-ripple",[n("md-card-header",[n("span",{staticClass:"md-subhead"},[t._v("Add new pin")])]),t._v(" "),n("md-card-content",[n("md-button",{staticClass:"md-icon-button board-button"},[n("md-icon",[t._v("add")])],1)],1)],1)],1)],1),t._v(" "),t._l(t.boardPins,function(e){return n("div",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],key:e._id,staticClass:"tile"},[n("md-card",[n("md-card-media",[n("img",{attrs:{src:e.url,alt:e.description}})]),t._v(" "),n("md-card-area",[n("md-card-actions",[n("md-button",{staticClass:"md-icon-button md-accent",on:{click:function(e){t.showConfirmDeletePinModal(!0)}}},[n("md-icon",[t._v("delete")])],1),t._v(" "),n("md-dialog-confirm",{attrs:{"md-active":t.confirmDeletePinControl,"md-title":"Confirm","md-content":"Are you sure you want to delete this pin?","md-confirm-text":"Delete","md-cancel-text":"Cancel"},on:{"update:mdActive":function(e){t.confirmDeletePinControl=e},"md-cancel":function(e){t.showConfirmDeletePinModal(!1)},"md-confirm":function(n){t.deletePinFromBoard(e._id)}}}),t._v(" "),n("md-button",{staticClass:"md-icon-button",nativeOn:{click:function(n){t.gotoPin(e)}}},[n("md-icon",[t._v("pageview")])],1)],1)],1)],1)],1)})],2),t._v(" "),n("md-dialog",{staticClass:"dialog",attrs:{"md-active":t.showDialogProp},on:{"update:mdActive":function(e){t.showDialogProp=e}}},[n("div",[n("md-dialog-title",[t._v("Add Pin")]),t._v(" "),n("md-field",{attrs:{"md-clearable":""}},[n("label",{attrs:{for:"pin-uri"}},[t._v("Enter Url")]),t._v(" "),n("md-input",{attrs:{name:"pin-uri"},model:{value:t.modal.url,callback:function(e){t.$set(t.modal,"url",e)},expression:"modal.url"}})],1),t._v(" "),n("md-field",[n("label",{attrs:{for:"pin-description"}},[t._v("Enter a description")]),t._v(" "),n("md-textarea",{attrs:{name:"pin-description"},model:{value:t.modal.description,callback:function(e){t.$set(t.modal,"description",e)},expression:"modal.description"}})],1),t._v(" "),n("md-divider"),t._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(e){t.showDialog(!1),t.modal.boardName=""}}},[t._v("Cancel")]),t._v(" "),n("md-button",{staticClass:"md-primary",on:{click:function(e){t.addPinToBoard()}}},[t._v("Create")])],1)],1)])],1)},staticRenderFns:[]},G=n("VU/8")(W,X,!1,function(t){n("sT6R")},"data-v-738019cd",null).exports,Y={name:"Dashboard",props:["authenticated"],components:{Profile:Q,Board:G}},K={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view",{attrs:{authenticated:this.authenticated}})},staticRenderFns:[]},Z=n("VU/8")(Y,K,!1,function(t){n("e2xb")},"data-v-458901b6",null).exports,tt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("md-empty-state",{staticClass:"md-accent",attrs:{"md-icon":"alarm","md-label":"404, page not found.","md-description":"The page you're looking for does not exist."}},[e("router-link",{attrs:{to:"/"}},[this._v("Go Home")])],1)],1)},staticRenderFns:[]},et=n("VU/8")({},tt,!1,function(t){n("J9ox")},null,null).exports,nt={name:"comments",props:["pin","comments","authenticated"],data:function(){return{comment:null,saveCommentModalControl:!1,showDeleteCommentModalControl:!1}},computed:{userPicture:function(){return JSON.parse(localStorage.getItem("profile")).picture},currentPin:function(){return this.pin},currentComments:function(){return this.comments},currentUser:function(){return $()}},methods:{saveComment:function(){(function(t,e){return h("/api/pins/"+t+"/comments",e)})(this.pin._id,{comment:this.comment,commentor:$(),commentorPicture:this.userPicture}).then(function(t){return I.emit("commentChange",t)}).catch(function(t){return console.error(t)}),this.showSaveCommentModal(!1)},deleteComment:function(t){(function(t,e){return C("/api/pins/"+t+"/comments/"+e)})(this.pin._id,t._id).then(function(t){return I.emit("commentChange",t.data)}).catch(function(t){return console.error(t)})},showSaveCommentModal:function(t){this.saveCommentModalControl=t,this.comment=null},showDeleteCommentConfirm:function(t){this.showDeleteCommentModalControl=t}}},ot={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("md-list",{staticClass:"md-double-line"},[n("span",{staticClass:"subheading text-center"},[t._v("Comments")]),t._v(" "),t.authenticated?n("md-button",{staticClass:"md-primary",on:{click:function(e){t.showSaveCommentModal(!0)}}},[t._v("Add Comment")]):t._e(),t._v(" "),t.currentComments?n("div",t._l(t.currentComments,function(e){return n("md-list-item",{key:e._id},[n("md-avatar",[n("img",{attrs:{src:e.commentorPicture}})]),t._v(" "),n("div",{staticClass:"md-list-item-text"},[n("span",[t._v(t._s(e.comment))])]),t._v(" "),t.currentUser===e.commentor?n("md-button",{staticClass:"md-icon-button md-accent",on:{click:function(e){t.showDeleteCommentConfirm(!0)}}},[n("md-icon",[t._v("delete")])],1):t._e(),t._v(" "),n("md-dialog-confirm",{attrs:{"md-active":t.showDeleteCommentModalControl,"md-title":"Are you sure?","md-content":"Deleting a comment is permanent.","md-confirm-text":"Delete","md-cancel-text":"Cancel"},on:{"update:mdActive":function(e){t.showDeleteCommentModalControl=e},"md-cancel":function(e){t.showDeleteCommentConfirm(!1)},"md-confirm":function(n){t.deleteComment(e)}}})],1)})):t._e()],1),t._v(" "),n("md-dialog",{attrs:{"md-active":t.saveCommentModalControl},on:{"update:mdActive":function(e){t.saveCommentModalControl=e}}},[n("md-dialog-title",[t._v("Add a new comment.")]),t._v(" "),n("md-dialog-content",[n("form",[n("md-field",[n("label",[t._v("Enter Comment")]),t._v(" "),n("md-input",{model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1)],1)]),t._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(e){t.saveComment()}}},[t._v("Save")]),t._v(" "),n("md-button",{staticClass:"md-primary",on:{click:function(e){t.showSaveCommentModal(!1)}}},[t._v("Cancel")])],1)],1)],1)},staticRenderFns:[]},at={name:"pin",props:["authenticated"],components:{Comments:n("VU/8")(nt,ot,!1,null,null,null).exports},data:function(){var t=this;return I.on("commentChange",function(e){t.fetchData()}),{loading:!1,pin:null,editPinModalControl:!1,savePinModalControl:!1,showCreateBoardDialogControl:!1,confirmDeletePinControl:!1,createBoardTitle:null,currentBoards:null,editPinDescription:null,comments:null}},methods:{deletePinFromBoard:function(t){var e=this;r(t).then(function(t){e.$router.replace("/")}).catch(function(t){return console.error(t)})},showEditPinModal:function(t){this.editPinModalControl=t,this.editPinDescription=null},showSavePinModal:function(t){this.savePinModalControl=t},showConfirmDeletePinModal:function(t){this.confirmDeletePinControl=t},toggleCreateABoardDialog:function(t){this.showCreateBoardDialogControl=t},savePinToBoard:function(t){var e=this;i({url:this.pin.url,description:this.pin.description,uploaded_by:this.pin.uploaded_by,saved_by:$()},{_id:t}).then(function(t){e.$router.replace("/"+U()+"/dashboard/"+t.data.value.title)}).catch(function(t){return console.error(t)})},createABoardToAddPin:function(t){var e=this;o({title:t,owner:$()}).then(function(t){e.savePinToBoard(t.data._id)})},submitPinEdit:function(){var t=this;this.loading=!0,function(t,e){return g("/api/pins/"+t,{description:e})}(this.$route.params.id,this.editPinDescription).then(function(){t.getPinData().then(function(e){t.loading=!1,t.pin=e.data}).catch(function(t){return console.error(t)})}).catch(function(t){return console.error(t)}),this.showEditPinModal(!1)},getPinData:function(){return function(t){return _("/api/pins/"+t)}(this.$route.params.id)},getPinComments:function(){var t=this,e=[];console.log(this.pin),this.pin&&this.pin.comments&&(this.pin.comments.forEach(function(){var n=w()(P.a.mark(function n(o){var a;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c(o._id);case 3:a=t.sent,e.push(a.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},n,t,[[0,7]])}));return function(t){return n.apply(this,arguments)}}()),this.comments=e)},fetchData:function(){var t=this;this.loading=!0,this.getPinData().then(function(e){t.pin=e.data,t.getPinComments(),$()&&a().then(function(e){t.currentBoards=e.data}).catch(function(t){return console.error(t)}),t.loading=!1})}},computed:{currentUser:function(){return $()}},created:function(){this.fetchData()},watch:{$route:"fetchData"}},it={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"md-layout md-gutter"},[t.loading?n("div",[n("md-progress-bar",{staticClass:"md-accent",attrs:{"md-mode":"query"}})],1):t._e(),t._v(" "),n("div",{staticClass:"md-layout-item md-size-50 md-xsmall-size-100 md-alignment-top-space-around"},[t.pin?n("md-card",[n("md-card-media",[n("img",{attrs:{src:t.pin.url,alt:t.pin.description}})]),t._v(" "),n("md-card-area",[n("md-card-content",[n("h3",[t._v(t._s(t.pin.description))])]),t._v(" "),t.currentUser===t.pin.saved_by?n("md-card-actions",[n("md-button",{staticClass:"md-icon-button md-accent",on:{click:function(e){t.showConfirmDeletePinModal(!0)}}},[n("md-icon",[t._v("delete")])],1),t._v(" "),n("md-dialog-confirm",{attrs:{"md-active":t.confirmDeletePinControl,"md-title":"Are you sure?","md-content":"Deleting a pin is permanent.","md-confirm-text":"Delete","md-cancel-text":"Cancel"},on:{"update:mdActive":function(e){t.confirmDeletePinControl=e},"md-cancel":function(e){t.showConfirmDeletePinModal(!1)},"md-confirm":function(e){t.deletePinFromBoard(t.pin._id)}}}),t._v(" "),n("md-button",{staticClass:"md-icon-button",nativeOn:{click:function(e){t.showEditPinModal(!0)}}},[n("md-icon",[t._v("edit")])],1)],1):t._e(),t._v(" "),t.authenticated&&t.currentUser!==t.pin.saved_by?n("md-card-actions",[n("md-button",{staticClass:"md-icon-button",on:{click:function(e){t.showSavePinModal(!0)}}},[n("md-icon",[t._v("bookmark")])],1)],1):t._e()],1)],1):t._e(),t._v(" "),n("comments",{attrs:{authenticated:t.authenticated,pin:t.pin,comments:t.comments}})],1),t._v(" "),n("md-dialog",{staticClass:"dialog",attrs:{"md-active":t.editPinModalControl},on:{"update:mdActive":function(e){t.editPinModalControl=e}}},[n("md-dialog-title",[t._v("Edit Pin")]),t._v(" "),n("md-card-content",[n("md-field",[n("label",{attrs:{for:"editDescription"}},[t._v("Edit Description")]),t._v(" "),n("md-input",{attrs:{name:"editDescription"},model:{value:t.editPinDescription,callback:function(e){t.editPinDescription=e},expression:"editPinDescription"}})],1)],1),t._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(e){t.showEditPinModal(!1)}}},[t._v("Cancel")]),t._v(" "),n("md-button",{staticClass:"md-primary",on:{click:function(e){t.submitPinEdit()}}},[t._v("Submit")])],1)],1),t._v(" "),n("md-dialog",{staticClass:"dialog",attrs:{"md-active":t.savePinModalControl},on:{"update:mdActive":function(e){t.savePinModalControl=e}}},[n("md-dialog-title",[t._v("Select a board to save pin to.")]),t._v(" "),n("md-dialog-content",[n("div",[n("md-button",{on:{click:function(e){t.toggleCreateABoardDialog(!0)}}},[t._v("Create Board")])],1),t._v(" "),t._l(t.currentBoards,function(e){return t.currentBoards?n("div",{key:e._id},[n("md-button",{on:{click:function(n){t.savePinToBoard(e._id)}}},[t._v(t._s(e.title))])],1):t._e()})],2),t._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(e){t.showSavePinModal(!1)}}},[t._v("Cancel")])],1)],1),t._v(" "),n("md-dialog",{attrs:{"md-active":t.showCreateBoardDialogControl},on:{"update:mdActive":function(e){t.showCreateBoardDialogControl=e}}},[n("md-dialog-title",[t._v("Create Board")]),t._v(" "),n("md-dialog-content",[n("md-field",{attrs:{"md-clearable":""}},[n("label",{attrs:{for:"board-name"}},[t._v("Board name")]),t._v(" "),n("md-input",{attrs:{name:"board-name"},model:{value:t.createBoardTitle,callback:function(e){t.createBoardTitle=e},expression:"createBoardTitle"}})],1),t._v(" "),n("md-dialog-actions",[n("md-button",{nativeOn:{click:function(e){t.toggleCreateABoardDialog(!1)}}},[t._v("Cancel")]),t._v(" "),n("md-button",{nativeOn:{click:function(e){t.createABoardToAddPin(t.createBoardTitle)}}},[t._v("Create")])],1)],1)],1)],1)},staticRenderFns:[]},rt=n("VU/8")(at,it,!1,function(t){n("54YU")},"data-v-b43365a4",null).exports;l.default.use(E.a);var ct=new E.a({mode:"history",routes:[{path:"/",name:"Home",component:J},{path:"/pins/:id",name:"Pin",component:rt},{path:"/callback",name:"Callback",component:q},{path:"/:id/dashboard",name:"Dashboard",component:Z,beforeEnter:function(t,e,n){U()!==t.params.id&&n("/"),n()},children:[{path:"profile",name:"Profile",component:Q},{path:":board",name:"Board",component:G}]},{path:"**",name:"FourOhFour",component:et}]}),dt=this,st=function(){var t=void 0;return function(){return t||(t=new x.a.WebAuth({domain:M.DOMAIN,clientID:M.CLIENT_ID,redirectUri:M.REDIRECT_URI,audience:"https://photoboard.herokuapp.com/api",responseType:"token id_token",scope:"openid profile"}))}}(),lt=function(){return st().parseHash(function(){var t=w()(P.a.mark(function t(e,n){return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n&&n.accessToken&&n.idToken)){t.next=8;break}return t.next=3,d(n);case 3:return t.next=5,s(n);case 5:return t.abrupt("return",ct.replace("/"));case 8:e&&(setTimeout(function(){return ct.replace("/")},1e3),console.error(e));case 9:case"end":return t.stop()}},t,dt)}));return function(e,n){return t.apply(this,arguments)}}())},ut=new T.a,mt=function(){var t=JSON.parse(localStorage.getItem("expires_at"));return(new Date).getTime()<t}(),ft=p(),vt={name:"navbar",props:["authenticated"],data:function(){return{}},methods:{login:function(){return st().authorize()},logout:function(){localStorage.removeItem("access_token"),localStorage.removeItem("id_token"),localStorage.removeItem("expires_at"),localStorage.removeItem("profile"),localStorage.removeItem("id"),ut.emit("authChange",{authenticated:!1}),ut.emit("profileChange",{currentUser:null}),ct.replace("/")},gotoProfile:function(){this.$router.push({name:"Profile",params:{id:v()}})}}},pt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("md-toolbar",{staticClass:"md-primary main-header",attrs:{"md-elevation":"1"}},[n("md-button",{staticClass:"md-icon-button",attrs:{to:"/"}},[n("md-icon",[t._v("photo_camera")])],1),t._v(" "),n("div",{staticStyle:{flex:"1"}},[n("span",{staticClass:"md-xsmall-hide md-title"},[t._v("PhotoBoard")])]),t._v(" "),t.authenticated?n("md-button",{on:{click:function(e){t.gotoProfile()}}},[t._v("Profile")]):t._e(),t._v(" "),t.authenticated?t._e():n("md-button",{on:{click:function(e){t.login()}}},[t._v("Sign In")]),t._v(" "),t.authenticated?n("md-button",{on:{click:function(e){t.logout()}}},[t._v("Sign Out")]):t._e()],1)},staticRenderFns:[]},ht={name:"app",components:{Navbar:n("VU/8")(vt,pt,!1,function(t){n("IQeL")},"data-v-756bed04",null).exports},data:function(){var t=this;return ut.on("authChange",function(e){t.authenticated=e.authenticated}),ut.on("profileChange",function(e){t.currentUser=e.currentUser}),{authenticated:mt,currentUser:ft,loading:!1}},methods:{beforeRouteRender:function(t,e,n){this.loading=!0,n()},afterRouteRender:function(){this.loading=!1}},created:function(){this.$router.beforeEach(this.beforeRouteRender),this.$router.afterEach(this.afterRouteRender)}},_t={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("navbar",{attrs:{authenticated:this.authenticated}}),this._v(" "),this.loading?e("div",[e("md-progress-bar",{staticClass:"md-accent",attrs:{"md-mode":"indeterminate"}})],1):this._e(),this._v(" "),e("router-view",{attrs:{authenticated:this.authenticated,currentUser:this.currentUser}})],1)},staticRenderFns:[]},gt=n("VU/8")(ht,_t,!1,function(t){n("hcQe")},null,null).exports,Ct=n("Lgyv"),bt=n.n(Ct),Pt=n("w/U7");n("4+hh"),n("MXkr");l.default.use(bt.a),l.default.use(Pt.a),l.default.config.productionTip=!1,new l.default({el:"#app",router:ct,template:"<App/>",components:{App:gt}})},e2xb:function(t,e){},hcQe:function(t,e){},sT6R:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.df7e5bb6b8394294f27a.js.map